parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"+h8f":[function(require,module,exports) {
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ChatBaseClass=function(){function ChatBaseClass(cssSelector){var _this=this;_classCallCheck(this,ChatBaseClass),_defineProperty(this,"_cssSelector",null),_defineProperty(this,"_data",{}),_defineProperty(this,"toJSON",function(){return _this._data}),"string"==typeof cssSelector?(this._cssSelector=cssSelector,this._assignDom()):this.dom=cssSelector}return _createClass(ChatBaseClass,[{key:"refresh",value:function(){return this._cssSelector?(this._assignDom(),this._createData()):console.warn("Could not refresh DOM: No CSS Selector given on instantiation."),this}},{key:"toCsv",value:function(){var header=Object.keys(this._data).map(function(key){return JSON.stringify(key)}).join(","),content=Object.values(this._data).map(function(value){return null==value?JSON.stringify(""):value.toCsv?value.toCsv().content:JSON.stringify(value)}).join(",");return{header:header,content:content,all:header+"\n"+content}}},{key:"toString",value:function(){return"[object] [".concat(this.constructor.name,"]")}},{key:"_createData",value:function(){}},{key:"_assignDom",value:function(){this.dom=document.querySelector(this._cssSelector)}},{key:"_query",value:function(key){var method=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"querySelectorAll":"querySelector",query=key.split(".").reduce(function(queryObj,key){return queryObj[key]},this.constructor._cssQuery);return query=Array.isArray(query)?query.join(" "):query,this.dom[method](query)}},{key:"_update",value:function(key,value){if(void 0===this._data[key])throw new Error("Unknown data property: "+key);this._data[key]=value}}]),ChatBaseClass}();_defineProperty(ChatBaseClass,"_cssQuery",{});var _default=ChatBaseClass;exports.default=_default;
},{}],"hwBT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _BaseClass=_interopRequireDefault(require("./BaseClass"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChatListItem=function(_ChatBaseClass){function ChatListItem(dom){var _this;return _classCallCheck(this,ChatListItem),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatListItem).call(this,dom)))),"_data",{id:null,title:null,imageSrc:null,description:null,latestTime:null,isSelected:null,isActive:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getId",function(){return _this.dom.dataset.chatid}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getTitle",function(){return _this._query("title").textContent}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getImageSrc",function(){return _this._query("imageSrc").src}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getDescription",function(){return _this._query("description").textContent}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getLatestTime",function(){return _this._query("latestTime").textContent}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getIsSelected",function(){return _this.dom.parentElement.classList.contains("ExSelected")}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getIsActive",function(){return!!_this._query("isActive")}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"click",function(){return _this.dom.click()}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"scrollIntoView",function(){return _this.dom.scrollIntoView({behavior:"smooth"})}),_this._createData(),_this}return _inherits(ChatListItem,_BaseClass.default),_createClass(ChatListItem,[{key:"refresh",value:function(){return this.dom=document.querySelector("[data-chatid="+this.getId()+"]"),this._createData(),this}},{key:"_createData",value:function(){this._update("id",this.getId()),this._update("title",this.getTitle()),this._update("imageSrc",this.getImageSrc()),this._update("description",this.getDescription()),this._update("latestTime",this.getLatestTime()),this._update("isSelected",this.getIsSelected()),this._update("isActive",this.getIsActive())}},{key:"id",get:function(){return this._data.id}},{key:"title",get:function(){return this._data.title}},{key:"imageSrc",get:function(){return this._data.imageSrc}},{key:"description",get:function(){return this._data.description}},{key:"latestTime",get:function(){return this._data.latestTime}},{key:"isSelected",get:function(){return this._data.isSelected}},{key:"isActive",get:function(){return this._data.isActive}}]),ChatListItem}();_defineProperty(ChatListItem,"_cssQuery",{title:".mdCMN04Txt .mdCMN04Head .mdCMN04Ttl",description:".mdCMN04Txt .mdCMN04Desc",latestTime:".mdCMN04Opt .mdCMN04Date time",imageSrc:".mdCMN04Img img",isActive:".MdIcoBadge01:not(.MdNonDisp)"});var _default=ChatListItem;exports.default=_default;
},{"./BaseClass":"+h8f"}],"7am4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _BaseClass=_interopRequireDefault(require("./BaseClass")),_Item=_interopRequireDefault(require("./Item"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChatList=function(_ChatBaseClass){function ChatList(cssSelector){var _this,domsLimit=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return _classCallCheck(this,ChatList),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatList).call(this,cssSelector)))),"_data",{items:[],selectedItem:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"_cache",{doms:[]}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getSelectedItem",function(){return _this.where("isSelected",!0)[0]}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"find",function(){var _this2;return _this.filter((_this2=_this)._getFindFilter.apply(_this2,arguments))}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"_getWhereFilter",function(key,value){return"function"==typeof value?function(item){return value(item[key])}:function(item){return item[key]===value}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"filter",function(filter){return _this.items.filter(filter)}),_this.domsLimit=domsLimit,_this._createData(),_this}return _inherits(ChatList,_BaseClass.default),_createClass(ChatList,[{key:"getItems",value:function(){var doms,cachedDoms=this._cache.doms;return cachedDoms.length>0?doms=cachedDoms:(doms=this._query("items",!0),this._cache.doms=doms),_toConsumableArray(doms).slice(0,this.domsLimit).map(function(dom){return new _Item.default(dom)})}},{key:"where",value:function(){for(var _this3=this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!Array.isArray(args[0])){var key=args[0],value=args[1];return this.filter(this._getWhereFilter(key,value))}return args.reduce(function(items,arg){var _arg=_slicedToArray(arg,2),key=_arg[0],value=_arg[1];return items.filter(_this3._getWhereFilter(key,value))},this.items)}},{key:"filterAndClick",value:function(filter,callback){var wait=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500,items=this.filter(filter);return items.reduce(function(time,item){return setTimeout(function(){item.click(),callback(item)},time),time+=wait},0),items.length}},{key:"_createData",value:function(){this._cache.doms=[],this._update("items",this.getItems()),this._update("selectedItem",this.getSelectedItem())}},{key:"_getFindFilter",value:function(keyword){var prop=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"title";return keyword.constructor.name===RegExp.name?function(item){return keyword.test(item[prop])}:function(item){return item[prop].toLowerCase().includes(keyword.toLowerCase())}}},{key:"items",get:function(){return this._data.items}},{key:"selectedItem",get:function(){return this._data.selectedItem}},{key:"activeItems",get:function(){return this.where("isActive",!0)}},{key:"length",get:function(){return this.items.length}}]),ChatList}();_defineProperty(ChatList,"_cssQuery",{items:".MdCMN04Item"});var _default=ChatList;exports.default=_default;
},{"./BaseClass":"+h8f","./Item":"hwBT"}],"RAzx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _BaseClass=_interopRequireDefault(require("./BaseClass"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChatMessage=function(_ChatBaseClass){function ChatMessage(dom){var _this;return _classCallCheck(this,ChatMessage),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatMessage).call(this,dom)))),"_data",{localId:null,contentType:null,content:null,issuerType:null,isRead:null,sentAt:null,issuer:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getLocalId",function(){return _this.dom.dataset.localId}),_this._createData(),_this}return _inherits(ChatMessage,_BaseClass.default),_createClass(ChatMessage,[{key:"getContentType",value:function(){var _this$constructor$_cs=this.constructor._cssQuery,content=_this$constructor$_cs.content,contentType=_this$constructor$_cs.contentType,classList=this.dom.querySelector(content).classList,type=Object.keys(contentType).find(function(key){return classList.contains(contentType[key][0].substring(1))});if(!type)throw new Error("Could not detect message content type from given classes: "+classList.value);return type}},{key:"getContent",value:function(){var contentType=this.contentType,dom=this._query("contentType."+contentType);return"text"===contentType?dom.innerHTML:dom.src}},{key:"getSentAt",value:function(){var date=new Date(this._getDateTimestamp()),dateString=[date.getFullYear(),date.getMonth()+1,date.getDate()].join("/"),timeString=this._query("sentAt").textContent;if(!/^\d{1,2}:\d{2} (AM|PM)$/g.test(timeString))throw new Error("Invalid timestring retrieved from "+this.constructor._cssQuery.sentAt+": "+timeString);var dateTimeString=[dateString,timeString].join(" ");return Date.parse(dateTimeString)}},{key:"getIssuerType",value:function(){var classList=this.dom.classList,issuerType=this.constructor._cssQuery.issuerType;return Object.keys(issuerType).find(function(key){return classList.contains(issuerType[key].substring(1))})}},{key:"getIsRead",value:function(){return"customer"===this.issuerType?null:!!this._query("isRead")}},{key:"getIssuer",value:function(){var issuer,dom=this._query("issuer");return dom?issuer=dom.textContent:dom||"own"!==this.issuerType?(console.warn("Could not detect issuer using "+this.constructor._cssQuery.issuer+". This is technically impossible"),issuer=null):issuer="currentAdmin",issuer}},{key:"_createData",value:function(){this._update("localId",this.getLocalId()),this._update("contentType",this.getContentType()),this._update("content",this.getContent()),this._update("sentAt",this.getSentAt()),this._update("issuerType",this.getIssuerType()),this._update("issuer",this.getIssuer()),this._update("isRead",this.getIsRead())}},{key:"_getDateTimestamp",value:function(){for(var prevDom=this.dom.previousElementSibling;;){var localId=prevDom.dataset.localId;if(prevDom.classList.contains("mdRGT10Date")&&localId)return parseInt(localId);prevDom=prevDom.previousElementSibling}}},{key:"localId",get:function(){return this._data.localId}},{key:"contentType",get:function(){return this._data.contentType}},{key:"content",get:function(){return this._data.content}},{key:"sentAt",get:function(){return this._data.sentAt}},{key:"issuerType",get:function(){return this._data.issuerType}},{key:"issuer",get:function(){return this._data.issuer}},{key:"isRead",get:function(){return this._data.isRead}}]),ChatMessage}();_defineProperty(ChatMessage,"_cssQuery",{content:".mdRGT07Msg",contentType:{text:[".mdRGT07Text",".mdRGT07MsgTextInner"],image:[".mdRGT07Image","img"],sticker:[".mdRGT07Sticker","img"]},issuerType:{admin:".mdRGT07Clerk",customer:".mdRGT07Other",own:".mdRGT07Own"},isRead:".mdRGT07Opt .mdRGT07Read:not(.MdNonDisp)",sentAt:".mdRGT07Date time",issuer:".mdRGT07Ttl"});var _default=ChatMessage;exports.default=_default;
},{"./BaseClass":"+h8f"}],"OvDg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _Message=_interopRequireDefault(require("./Message")),_BaseClass=_interopRequireDefault(require("./BaseClass"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChatMessageList=function(_ChatBaseClass){function ChatMessageList(cssSelector){var _this;return _classCallCheck(this,ChatMessageList),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatMessageList).call(this,cssSelector)))),"_data",{messages:[],participatedAdmins:[],conversationTurns:null,hasPreviousMessages:null}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getMessages",function(){return _toConsumableArray(_this._query("messages",!0)).map(function(dom){return new _Message.default(dom)})}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"getHasPreviousMessages",function(){return!_this._query("prevMessageButton").classList.contains("MdNonDisp")}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"_getWhereFilter",function(key,value){return"function"==typeof value?function(item){return value(item[key])}:function(item){return item[key]===value}}),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this)),"filter",function(filter){return _this.messages.filter(filter)}),_this._createData(),_this}return _inherits(ChatMessageList,_BaseClass.default),_createClass(ChatMessageList,[{key:"getConversationTurns",value:function(){var turns=0;return this.messages.reduce(function(prev,current){return current.issuer!==prev.issuer&&turns++,current}),turns}},{key:"getParticipatedAdmins",value:function(){var admins=[],msgs=this.where("issuerType",function(type){return"admin"===type||"own"===type});return 1===msgs.length?admins.push(msgs[0].issuer):msgs.reduce(function(prev,current,index){var issuer=current.issuer;return(1===index||issuer!==prev.issuer&&!admins.includes(issuer))&&admins.push(issuer),current}),admins}},{key:"where",value:function(){for(var _this2=this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];if(!Array.isArray(args[0])){var key=args[0],value=args[1];return this.filter(this._getWhereFilter(key,value))}return args.reduce(function(messages,arg){var _arg=_slicedToArray(arg,2),key=_arg[0],value=_arg[1];return messages.filter(_this2._getWhereFilter(key,value))},this.messages)}},{key:"_createData",value:function(){this._update("messages",this.getMessages()),this._update("conversationTurns",this.getConversationTurns()),this._update("participatedAdmins",this.getParticipatedAdmins()),this._update("hasPreviousMessages",this.getHasPreviousMessages())}},{key:"messages",get:function(){return this._data.messages}},{key:"notices",get:function(){return this._query("notices",!0)}},{key:"dates",get:function(){return this._query("dates",!0)}},{key:"length",get:function(){return this.messages.length}},{key:"conversationTurns",get:function(){return this._data.conversationTurns}},{key:"participatedAdmins",get:function(){return this._data.participatedAdmins}},{key:"hasPreviousMessages",get:function(){return this._data.hasPreviousMessages}},{key:"firstMessage",get:function(){return this.messages[0]}},{key:"lastMessage",get:function(){return this.messages.slice(-1)[0]}}]),ChatMessageList}();_defineProperty(ChatMessageList,"_cssQuery",{messages:".MdRGT07Cont",prevMessageButton:"#_prev_msg_btn",notices:".MdRGT10Notice",dates:".MdRGT10Notice.mdRGT10Date time"});var _default=ChatMessageList;exports.default=_default;
},{"./Message":"RAzx","./BaseClass":"+h8f"}],"pcWU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _BaseClass=_interopRequireDefault(require("./BaseClass")),_MessageList=_interopRequireDefault(require("./MessageList"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var ChatRoom=function(_ChatBaseClass){function ChatRoom(cssSelector){var _this;return _classCallCheck(this,ChatRoom),_defineProperty(_assertThisInitialized(_assertThisInitialized(_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatRoom).call(this,cssSelector)))),"_data",{title:null,isFriend:null}),_this.messageList=new _MessageList.default(_this.constructor._cssQuery.messageList),_this._createData(),_this}return _inherits(ChatRoom,_BaseClass.default),_createClass(ChatRoom,[{key:"getTitle",value:function(){var dom=this._query("title");return dom?dom.textContent:null}},{key:"getIsFriend",value:function(){return!this._query("isFriend")}},{key:"addFriend",value:function(){this.isFriend?console.warn("This friend has already been added"):this._query("isFriend").click()}},{key:"rename",value:function(name){var _this2=this;this._query("header").click(),setTimeout(function(){return _this2._query("editNameButton").click()},500)}},{key:"sendMessage",value:function(text){if("string"!=typeof text)throw new TypeError("Input value must be string");this._query("input").innerHTML=text}},{key:"_createData",value:function(){this._update("title",this.getTitle()),this._update("isFriend",this.getIsFriend())}},{key:"title",get:function(){return this._data.title}},{key:"isFriend",get:function(){return this._data.isFriend}}]),ChatRoom}();_defineProperty(ChatRoom,"_cssQuery",{title:"#_chat_header_area .mdRGT04Ttl",isFriend:"#_chat_header_add_btn",header:".MdRGT04Head.mdRGT04Link",editNameButton:"#_chat_detail_area #_chat_contact_detail_view button.MdBtn01Edit01",messageList:"#_chat_room_msg_list",messages:"#_chat_room_msg_list .MdRGT07Cont",input:"#_chat_room_input"});var _default=ChatRoom;exports.default=_default;
},{"./BaseClass":"+h8f","./MessageList":"OvDg"}],"TtJ9":[function(require,module,exports) {
"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ChatAdmin=function(){function ChatAdmin(_ref){var _this=this,list=_ref.list,room=_ref.room;_classCallCheck(this,ChatAdmin),_defineProperty(this,"_currentCustomerData",null),_defineProperty(this,"sendMessage",function(message){return _this.room.sendMessage(message)}),_defineProperty(this,"rename",function(name){return _this.room.rename(name)}),_defineProperty(this,"addFriend",function(){return _this.room.addFriend()}),_defineProperty(this,"sendToMany",function(message,filter){var wait=arguments.length>2&&void 0!==arguments[2]?arguments[2]:500;return _this.list.filterAndClick(filter,function(){return _this.sendMessage(message)},wait)}),this._addChatDependency("list",list,"ChatList"),this._addChatDependency("room",room,"ChatRoom")}return _createClass(ChatAdmin,[{key:"_addChatDependency",value:function(key,instance,className){if(instance.constructor.name!==className)throw new TypeError("Expected "+className+" but "+instance.constructor.name+" given.");this[key]=instance}},{key:"data",get:function(){return{cover:this.list.selectedItem._data,room:this.room.messageList._data}}}]),ChatAdmin}(),_default=ChatAdmin;exports.default=_default;
},{}],"guaG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getChatMessageList=exports.getChatAdmin=exports.getChatRoom=exports.getChatList=void 0;var _List=_interopRequireDefault(require("./Chat/List")),_Room=_interopRequireDefault(require("./Chat/Room")),_Admin=_interopRequireDefault(require("./Chat/Admin")),_MessageList=_interopRequireDefault(require("./Chat/MessageList"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var getChatList=function(){return new _List.default("#_chat_list_body")};exports.getChatList=getChatList;var getChatMessageList=function(){return new _MessageList.default("#_chat_room_msg_list")};exports.getChatMessageList=getChatMessageList;var getChatRoom=function(){return new _Room.default("#rightSide")};exports.getChatRoom=getChatRoom;var getChatAdmin=function(){return new _Admin.default({list:getChatList(),room:getChatRoom()})};exports.getChatAdmin=getChatAdmin;
},{"./Chat/List":"7am4","./Chat/Room":"pcWU","./Chat/Admin":"TtJ9","./Chat/MessageList":"OvDg"}],"Focm":[function(require,module,exports) {
"use strict";var _functions=require("./functions");window.getChatAdmin=_functions.getChatAdmin;
},{"./functions":"guaG"}]},{},["Focm"], null)
//# sourceMappingURL=/line-at-admin.min.map